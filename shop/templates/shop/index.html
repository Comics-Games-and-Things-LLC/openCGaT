{% extends 'filtered_list_view.html' %}
{% load templatehelpers %}
{% load wagtailcore_tags %}
{% load templatehelpers %}
{% load static %}

{% block title %}{% if manage %} Manage Products {% else %} Shop {% endif %}{% endblock %}
{% block content_header %}
    {% if not manage %}
        {% with user|get_retail_partners as partners %}
            {% if partners|length == 1 %}
                <a href="{% keep_get_params_url 'manage_products' partner_slug=partners.0.slug %}">
                    Manage Products
                </a>
            {% elif partners %}
                <strong>Manage as:</strong>
                {% for partner in partners %}
                    <a href="{% keep_get_params_url 'manage_products' partner_slug=partner.slug %}">
                        {{ partner.name }}
                    </a>
                {% endfor %}
            {% endif %}
        {% endwith %}
    {% else %}
        <div class="grid-cols-2">
            <div class="row">
                <div class="col">
                    <a class="nav-link" href="{% keep_get_params_url 'shop' %}">
                        Switch to Public View
                    </a>
                </div>
                <div class="col">
                    <a class="nav-link" href="{% keep_get_params_url 'bulk_edit' partner_slug=partner.slug %}">
                        Switch to Bulk Edit
                    </a>
                </div>
            </div>
        </div>
    {% endif %}
{% endblock %}
{% block card %}
    {% include 'shop/snippets/item_list_entry.html' with first=1 item=entry %}
{% endblock card %}
{% block alternate %}
    <p class="p-6">No products are available that match your search criteria.</p>
    {% if collection %}
        <p class="p-6">
            You are currently searching in {{ collection }}. <a href="."> Start a new search </a> or look through
            another collection.
        </p>
    {% else %}
        <p class="p-6"><a href="."> Start a new search </a> or expand your search criteria.</p>
    {% endif %}
{% endblock %}
{% if collection %}
    {% block end_search %}
        <p class="text-sm text-gray-700 m-0">
            You've reached the end of {{ collection }}. Didn't find what you're looking for?
            Try <a href="."> a new search </a> or look through another collection.
        </p>
    {% endblock %}
{% endif %}